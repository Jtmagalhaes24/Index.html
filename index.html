<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O C√≥digo do Rei - Multiplayer com Opera√ß√µes</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        input, select, button { font-size: 18px; margin: 5px; padding: 10px; }
        #feedback, #attempts, #questions-left, #turn { margin-top: 15px; font-size: 18px; }
    </style>
</head>
<body>
    <h1>O C√≥digo do Rei - Multiplayer</h1>
    <p>Descubra o c√≥digo secreto antes do seu oponente!</p>

    <h2 id="turn">Vez do Jogador 1</h2>
    <input type="number" id="guess" min="100" max="999" placeholder="Digite o palpite">
    <button onclick="checkCode()">Enviar Palpite</button>

    <p>OU fa√ßa uma pergunta:</p>
    <select id="question">
        <option value="even">O √∫ltimo n√∫mero √© par?</option>
        <option value="multiple3">√â um m√∫ltiplo de 3?</option>
        <option value="contains">Cont√©m (um n√∫mero espec√≠fico)?</option>
        <option value="greater">√â maior do que (um n√∫mero espec√≠fico)?</option>
        <option value="sum">A soma dos d√≠gitos √© igual a X?</option>
        <option value="product">O produto dos d√≠gitos √© igual a X?</option>
        <option value="difference">A diferen√ßa entre o maior e menor d√≠gito √© X?</option>
        <option value="division">A divis√£o entre o primeiro e o √∫ltimo d√≠gito d√° X?</option>
    </select>
    <input type="number" id="question-value" min="0" max="999" placeholder="Valor">
    <button onclick="askQuestion()">Perguntar</button>

    <p id="feedback"></p>
    <p id="attempts">Tentativas restantes: 10</p>
    <p id="questions-left">Perguntas restantes: 3</p>

    <script>
        let secretCode = generateSecretCode();
        let attempts = 10;
        let questionsLeft = 3;
        let currentPlayer = 1;

        function generateSecretCode() {
            return String(Math.floor(100 + Math.random() * 900)); // N√∫mero aleat√≥rio de 3 d√≠gitos
        }

        function switchTurn() {
            currentPlayer = currentPlayer === 1 ? 2 : 1;
            document.getElementById("turn").textContent = "Vez do Jogador " + currentPlayer;
        }

        function checkCode() {
            if (attempts <= 0) return alert("Acabaram as tentativas!");
            let guess = document.getElementById("guess").value;
            if (guess.length !== 3) {
                alert("Digite um n√∫mero de 3 d√≠gitos!");
                return;
            }

            attempts--;
            document.getElementById("attempts").textContent = "Tentativas restantes: " + attempts;

            if (guess === secretCode) {
                document.getElementById("feedback").innerHTML = `üéâ O Jogador ${currentPlayer} venceu! O c√≥digo era ${secretCode}!`;
                alert(`Parab√©ns, Jogador ${currentPlayer}! Voc√™ √© o Rei!`);
                return;
            }

            let feedback = "";
            for (let i = 0; i < 3; i++) {
                if (guess[i] === secretCode[i]) {
                    feedback += `‚úÖ ${guess[i]} `;
                } else if (secretCode.includes(guess[i])) {
                    feedback += `‚ö†Ô∏è ${guess[i]} `;
                } else {
                    feedback += `‚ùå ${guess[i]} `;
                }
            }
            document.getElementById("feedback").innerHTML = feedback;

            if (attempts === 0) {
                alert(`Fim do jogo! O c√≥digo secreto era ${secretCode}`);
            } else {
                switchTurn();
            }
        }

        function askQuestion() {
            if (attempts <= 0) return alert("Acabaram as tentativas!");
            if (questionsLeft <= 0) return alert("Sem perguntas restantes!");

            let questionType = document.getElementById("question").value;
            let questionValue = parseInt(document.getElementById("question-value").value);
            let response = "";

            let digits = secretCode.split("").map(Number); // Transforma o c√≥digo em um array de n√∫meros
            let sum = digits.reduce((a, b) => a + b, 0);
            let product = digits.reduce((a, b) => a * b, 1);
            let maxDigit = Math.max(...digits);
            let minDigit = Math.min(...digits);
            let firstDigit = digits[0];
            let lastDigit = digits[2];

            if (questionType === "even") {
                response = (lastDigit % 2 === 0) ? "Sim, o √∫ltimo n√∫mero √© par." : "N√£o, √© √≠mpar.";
            } else if (questionType === "multiple3") {
                response = (parseInt(secretCode) % 3 === 0) ? "Sim, √© um m√∫ltiplo de 3." : "N√£o, n√£o √©.";
            } else if (questionType === "contains") {
                response = secretCode.includes(questionValue) ? `Sim, cont√©m o n√∫mero ${questionValue}.` : `N√£o, n√£o cont√©m ${questionValue}.`;
            } else if (questionType === "greater") {
                response = (parseInt(secretCode) > questionValue) ? "Sim, √© maior." : "N√£o, √© menor ou igual.";
            } else if (questionType === "sum") {
                response = (sum === questionValue) ? "Sim, a soma √© igual." : "N√£o, a soma √© diferente.";
            } else if (questionType === "product") {
                response = (product === questionValue) ? "Sim, o produto √© igual." : "N√£o, o produto √© diferente.";
            } else if (questionType === "difference") {
                response = (maxDigit - minDigit === questionValue) ? "Sim, a diferen√ßa √© igual." : "N√£o, a diferen√ßa √© diferente.";
            } else if (questionType === "division") {
                response = (firstDigit / lastDigit === questionValue) ? "Sim, a divis√£o √© exata." : "N√£o, a divis√£o n√£o √© exata.";
            }

            attempts--;
            questionsLeft--;
            document.getElementById("attempts").textContent = "Tentativas restantes: " + attempts;
            document.getElementById("questions-left").textContent = "Perguntas restantes: " + questionsLeft;
            document.getElementById("feedback").innerHTML = response;

            if (attempts === 0) {
                alert(`Fim do jogo! O c√≥digo secreto era ${secretCode}`);
            } else {
                switchTurn();
            }
        }
    </script>
</body>
</html>
